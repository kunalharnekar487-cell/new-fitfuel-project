<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FitFuel Wallet</title>
  <script defer src="wallet.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans min-h-screen">

  <!-- Header -->
  <header class="bg-yellow-400 p-4 flex justify-between items-center shadow">
    <h1 class="text-xl font-bold">üí∞ FitFuel Wallet</h1>
    <a href="index.html" class="text-sm bg-black text-white px-4 py-2 rounded hover:bg-gray-800">‚Üê Back to Home</a>
  </header>

  <!-- Wallet Main Section -->
  <main class="max-w-2xl mx-auto bg-white p-6 mt-10 rounded-lg shadow">
    <h2 class="text-xl font-semibold mb-4">Wallet Balance</h2>
    <div class="text-4xl font-bold text-green-600 mb-6">
      ‚Çπ<span id="wallet-balance">0.00</span>
    </div>

    <button onclick="addMoney()" class="bg-yellow-400 text-black font-bold px-5 py-2 rounded hover:bg-yellow-500 transition">
      ‚ûï Add Money
    </button>

    <!-- History -->
    <div class="mt-8">
      <h3 class="text-lg font-semibold mb-2">Transaction History</h3>
      <ul id="transaction-list" class="space-y-3">
        <!-- Transactions will appear here -->
      </ul>
      <div id="wallet-section" class="wallet-container">
  <!-- Wallet details will be loaded here by JavaScript -->
</div>

    </div>
  </main>

  <!-- Add Money Modal -->
  <div id="wallet-modal" class="fixed inset-0 bg-black/50 items-center justify-center hidden">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-5">
      <div class="flex justify-between items-center mb-3">
        <h3 class="text-lg font-semibold">Add Money to Wallet</h3>
        <button id="cancel-modal-btn" class="text-gray-600 hover:text-black">‚úï</button>
      </div>

      <div class="space-y-3 text-sm">
        <div>
          <label class="block text-gray-700 mb-1">Amount (‚Çπ)</label>
          <input id="amount-input" type="number" min="10" max="10000" step="1" class="w-full border rounded px-3 py-2" placeholder="e.g., 500" />
          <p class="text-xs text-gray-500 mt-1">Min ‚Çπ10, Max ‚Çπ10,000. Daily cap ‚Çπ20,000.</p>
        </div>

        <div>
          <label class="block text-gray-700 mb-1">Payment Method</label>
          <select id="method-select" class="w-full border rounded px-3 py-2">
            <option value="upi">UPI</option>
            <option value="card">Card</option>
            <option value="netbanking">NetBanking</option>
          </select>
        </div>

        <div id="upi-row">
          <label class="block text-gray-700 mb-1">UPI ID</label>
          <input id="upi-input" type="text" class="w-full border rounded px-3 py-2" placeholder="name@bank" />
        </div>

        <div id="phone-row">
          <label class="block text-gray-700 mb-1">Registered Phone</label>
          <input id="phone-input" type="tel" maxlength="10" class="w-full border rounded px-3 py-2" placeholder="10-digit phone" />
          <p class="text-xs text-gray-500">Needed for OTP if not already saved.</p>
        </div>

        <div class="flex items-center gap-2">
          <button id="send-otp-btn" class="bg-indigo-600 text-white px-3 py-2 rounded">Send OTP</button>
          <span id="otp-sent-note" class="text-xs text-green-600 hidden">OTP sent.</span>
        </div>

        <div>
          <label class="block text-gray-700 mb-1">Enter OTP</label>
          <input id="otp-input" type="text" maxlength="6" class="w-full border rounded px-3 py-2" placeholder="6-digit OTP" />
        </div>

        <div class="flex justify-end gap-2 pt-2">
          <button id="confirm-add-btn" class="bg-green-600 text-white px-4 py-2 rounded">Confirm Add</button>
        </div>
      </div>
    </div>
  </div>
<script>
// Simulating user data (Replace this with real data from backend or localStorage)
const authUser = (() => {
    try { return JSON.parse(localStorage.getItem('fitfuel_user') || 'null'); } catch { return null; }
})();
let userWallet = {
    username: (authUser && (authUser.name || authUser.email)) ? (authUser.name || authUser.email) : 'User',
    ffCash: 250, // Change to 0 to test no balance
    lastUpdated: "08 Aug 2025"
};

function renderWallet() {
    let walletSection = document.getElementById("wallet-section");

    if (userWallet.ffCash > 0) {
        walletSection.innerHTML = `
            <div class="wallet-balance">‚Çπ${userWallet.ffCash} FF Cash</div>
            <div class="wallet-details">
                <p>Account Holder: <strong>${userWallet.username}</strong></p>
                <p>Last Updated: ${userWallet.lastUpdated}</p>
                <p>Use your FF Cash on protein powders, gym gear, and more!</p>
            </div>
        `;
    } else {
        walletSection.innerHTML = `
            <div class="no-balance">
                You have no FF Cash yet. Start shopping to earn rewards!
            </div>
        `;
    }
}

renderWallet();
</script>

</body>
</html>
